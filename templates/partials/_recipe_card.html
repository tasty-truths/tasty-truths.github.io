{# Recipe Card Partial #}
{# Usage: {% include 'partials/_recipe_card.html' %} with recipe object in context #}

<article class="recipe-card">
  <div class="recipe-card-image">
    {% if recipe.image_filename %}
    <img src="{{ url_for('static', filename=recipe.image_filename) }}" alt="{{ recipe.title }}" />
    {% else %}
    <img src="{{ url_for('static', filename='assets/images/placeholder_recipe.png') }}" alt="{{ recipe.title }}" />
    {% endif %}
  </div>

  <div class="recipe-card-content">
    <h3 class="recipe-card-title">{{ recipe.title }}</h3>

    {% if recipe.description %}
    <p class="recipe-card-description">{{ recipe.description[:120] }}{% if recipe.description|length > 120 %}...{% endif %}</p>
    {% else %}
    <p class="recipe-card-description recipe-card-description-empty">No description available.</p>
    {% endif %}

    <!-- Cuisine and Prep Time Info -->
    <div class="recipe-card-meta">
      {% if recipe.cuisine %}
      <span class="recipe-cuisine">{{ recipe.cuisine }}</span>
      {% endif %}
      
      {% if recipe.prep_time_minutes %}
      <span class="recipe-time">‚è± {{ recipe.prep_time_minutes }}m prep</span>
      {% endif %}
    </div>

    <!-- Dietary Tags -->
    {% if recipe.dietary_tags and recipe.dietary_tags|length > 0 %}
    <div class="recipe-tags">
      {% for tag in recipe.dietary_tags %}
      <span class="tag badge-{{ tag|replace('-', '_') }}">{{ tag|title }}</span>
      {% endfor %}
    </div>
    {% endif %}

    <div class="recipe-card-footer">
      <div class="recipe-card-rating">
        {% if recipe.average_rating %}
        <span class="rating-value">{{ recipe.average_rating|round(1) }}/5.0</span>
        {% else %}
        <span class="rating-empty">No ratings yet</span>
        {% endif %}
      </div>

      <a href="{{ url_for('recipe_detail', id_slug=recipe.id ~ '-' ~ recipe.slug) }}" class="recipe-card-link">
        View Recipe
      </a>
    </div>
  </div>
</article>
